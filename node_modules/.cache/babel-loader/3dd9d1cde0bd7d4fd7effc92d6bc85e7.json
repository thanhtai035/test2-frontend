{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{withOktaAuth}from'@okta/okta-react';import DeleteDialog from'../components/staff/DeleteDialog';import M from'materialize-css';import{Link}from'react-router-dom';import MOList from'./MOList';import API from'../components/misc/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MO=/*#__PURE__*/function(_Component){_inherits(MO,_Component);var _super=_createSuper(MO);function MO(){var _this;_classCallCheck(this,MO);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={MO:[],code:'',page:1,totalPage:1};_this.deleteModal=null;_this.showDialog=function(code){_this.code=code;_this.deleteModal.open();};_this.getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(page){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=API;_context.next=3;return _this.props.oktaAuth.authStateManager._authState.accessToken.accessToken;case 3:_context.t1=_context.sent;_context.t2='Bearer '+_context.t1;_context.t3={'Authorization':_context.t2};_context.t4={headers:_context.t3};_context.t0.get.call(_context.t0,\"mo\",_context.t4).then(function(response){var pageNum=new URLSearchParams(window.location.search).get('page');var keyword=new URLSearchParams(window.location.search).get('keyword');if(pageNum==null){pageNum=1;}var pageData=new Object();if(keyword!=null){var filter=response.data.filter(function(item){return item.client.includes(keyword);});pageData=filter.slice(pageNum*2-2,pageNum*2);}else{pageData=response.data.slice(pageNum*2-2,pageNum*2);}console.log(_this.props.oktaAuth.authStateManager._authState.accessToken.accessToken);_this.setState({MO:pageData,page:pageNum,totalPage:pageData.length/3+1});}).catch(function(error){console.log(error);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteProduct=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=API;_context2.t1=\"mo/\".concat(_this.code);_context2.next=4;return _this.props.authState.accessToken.accessToken;case 4:_context2.t2=_context2.sent;_context2.t3='Bearer '+_context2.t2;_context2.t4={'Authorization':_context2.t3};_context2.t5={headers:_context2.t4};_context2.t0.delete.call(_context2.t0,_context2.t1,_context2.t5).then(function(){window.location.reload(false);}).catch(function(error){console.log(error);});case 9:case\"end\":return _context2.stop();}}},_callee2);}));_this.setToDone=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(code){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=API;_context3.t1=\"mo/\".concat(code);_context3.next=4;return _this.props.authState.accessToken.accessToken;case 4:_context3.t2=_context3.sent;_context3.t3='Bearer '+_context3.t2;_context3.t4={'Authorization':_context3.t3};_context3.t5={headers:_context3.t4};_context3.t0.put.call(_context3.t0,_context3.t1,_context3.t5).then(function(){}).catch(function(error){console.log(error);});case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.searchKeyword=function(){window.location.replace(window.location.pathname+'?keyword='+document.getElementById('search').value+\"&page=1\");};return _this;}_createClass(MO,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.getProducts(1);this.deleteModal=M.Modal.init(document.getElementById('deleteModal'));case 2:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var currentPage=this.state.page;var previousPage=currentPage-1;var pageNum=new URLSearchParams(window.location.search).get('page');var nextPage=previousPage+2;var minPage=currentPage>1?{\"display\":\"block\"}:{\"display\":\"none\"};var maxPage=currentPage<this.state.totalPage+1?{\"display\":\"block\"}:{\"display\":\"none\"};var keyword=new URLSearchParams(window.location.search).get('keyword');var url=keyword==null?window.location.pathname+'?page=':window.location.pathname+'?keyword='+keyword+'&page=';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MOList,{mos:this.state.MO,showDialog:this.showDialog,setToDone:this.setToDone}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white\",id:\"search\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w3-green w3-xlarge w3-padding w3-center w3-margin\",onClick:this.searchKeyword,children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"w3-bar w3-large w3-container w3-center\",children:[/*#__PURE__*/_jsx(\"a\",{href:url+previousPage,class:\"w3-button\",style:minPage,children:previousPage}),/*#__PURE__*/_jsx(\"a\",{href:url+currentPage,class:\"w3-button w3-green\",children:currentPage}),/*#__PURE__*/_jsx(\"a\",{href:url+nextPage,style:maxPage,class:\"w3-button   \",children:nextPage})]}),/*#__PURE__*/_jsx(DeleteDialog,{deleteObject:this.deleteProduct})]});}}]);return MO;}(Component);export default withOktaAuth(MO);","map":{"version":3,"names":["React","Component","withOktaAuth","DeleteDialog","M","Link","MOList","API","MO","state","code","page","totalPage","deleteModal","showDialog","open","getProducts","props","oktaAuth","authStateManager","_authState","accessToken","headers","get","then","response","pageNum","URLSearchParams","window","location","search","keyword","pageData","Object","filter","data","item","client","includes","slice","console","log","setState","length","catch","error","deleteProduct","authState","delete","reload","setToDone","put","searchKeyword","replace","pathname","document","getElementById","value","Modal","init","currentPage","previousPage","nextPage","minPage","maxPage","url"],"sources":["C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/src/MO/MO.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { withOktaAuth } from '@okta/okta-react'\r\nimport DeleteDialog from '../components/staff/DeleteDialog'\r\nimport M from 'materialize-css'\r\nimport { Link } from 'react-router-dom'\r\nimport MOList from './MOList'\r\nimport API from '../components/misc/api'\r\n\r\nclass MO extends Component {\r\n    state = {\r\n        MO: [],\r\n        code: '',\r\n        page: 1,\r\n        totalPage: 1\r\n    }\r\n\r\n    deleteModal = null\r\n\r\n\r\n    showDialog = (code) => {\r\n        this.code = code\r\n        this.deleteModal.open()\r\n    }\r\n\r\n    async componentDidMount() {\r\n    \r\n        this.getProducts(1)\r\n        this.deleteModal = M.Modal.init(document.getElementById('deleteModal'))\r\n    }\r\n    getProducts = async (page) => {\r\n        API.get(`mo`, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + await this.props.oktaAuth.authStateManager._authState.accessToken.accessToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                let pageNum = new URLSearchParams(window.location.search).get('page');\r\n                let keyword = new URLSearchParams(window.location.search).get('keyword');\r\n                if (pageNum == null) {\r\n                    pageNum = 1;\r\n                }\r\n                let pageData = new Object()\r\n                if (keyword != null) {\r\n                    let filter = response.data.filter(item =>\r\n                        item.client.includes(keyword)\r\n                    )\r\n                    pageData = filter.slice((pageNum * 2) - 2, pageNum * 2)\r\n                } else {\r\n                    pageData = response.data.slice((pageNum * 2) - 2, pageNum * 2)\r\n                }\r\n                console.log(this.props.oktaAuth.authStateManager._authState.accessToken.accessToken)\r\n                this.setState({\r\n                    MO: pageData,\r\n                    page: pageNum,\r\n                    totalPage: (pageData.length / 3) + 1\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    deleteProduct = async () => {\r\n        API.delete(`mo/${this.code}`, {\r\n          headers: {\r\n            'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n          }\r\n        })\r\n          .then(() => {\r\n            window.location.reload(false);\r\n          })    \r\n          .catch(error => {\r\n            console.log(error)\r\n          })\r\n    }\r\n\r\n    setToDone = async (code) => {\r\n        API.put(`mo/${code}`, {\r\n            headers: {\r\n              'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n            }\r\n          })\r\n            .then(() => {\r\n            })    \r\n            .catch(error => {\r\n              console.log(error)\r\n            })\r\n      }\r\n\r\n      searchKeyword = () => {\r\n        window.location.replace(window.location.pathname + '?keyword=' + document.getElementById('search').value + \"&page=1\")\r\n    }\r\n    render() {\r\n        const currentPage = this.state.page\r\n        const previousPage = currentPage - 1\r\n        let pageNum = new URLSearchParams(window.location.search).get('page');\r\n        const nextPage = previousPage  + 2;\r\n        const minPage = currentPage > 1 ? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const maxPage = currentPage< this.state.totalPage + 1? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const keyword = new URLSearchParams(window.location.search).get('keyword');\r\n        const url = keyword == null ? window.location.pathname + '?page=' : window.location.pathname + '?keyword=' + keyword + '&page='\r\n        return (\r\n            <div>\r\n                <MOList mos={this.state.MO} showDialog={this.showDialog} setToDone={this.setToDone}/>\r\n                <input class=\"w3-input w3-border w3-white\" id=\"search\" type=\"text\"  />\r\n                <button className='w3-green w3-xlarge w3-padding w3-center w3-margin' onClick={this.searchKeyword}>Search</button>\r\n                <div class=\"w3-bar w3-large w3-container w3-center\">\r\n                    <a href={url + previousPage} class=\"w3-button\" style={minPage}>{previousPage}</a>\r\n                    <a href={url + currentPage} class=\"w3-button w3-green\">{currentPage}</a>\r\n                    <a href={url + nextPage} style={maxPage} class=\"w3-button   \">{nextPage}</a>\r\n                </div>\r\n                <DeleteDialog deleteObject={this.deleteProduct}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withOktaAuth(MO)"],"mappings":"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"},"metadata":{},"sourceType":"module"}