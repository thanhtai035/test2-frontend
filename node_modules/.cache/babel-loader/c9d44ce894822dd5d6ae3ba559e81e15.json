{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Downloads\\\\okta-springboot-react-master\\\\okta-springboot-react-master\\\\jobs-ui\\\\src\\\\components\\\\BOM\\\\BOM.jsx\";\nimport React, { Component } from 'react';\nimport { withOktaAuth } from '@okta/okta-react';\nimport API from '../misc/api';\nimport DeleteDialog from '../staff/DeleteDialog';\nimport M from 'materialize-css';\nimport { Link } from 'react-router-dom';\nimport BOMForm from './BOMForm';\nimport BOMList from './BOMList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BOM extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      BOM: [],\n      code: '',\n      page: 1,\n      totalPage: 1\n    };\n    this.deleteModal = null;\n\n    this.showDialog = code => {\n      this.code = code;\n      this.deleteModal.open();\n    };\n\n    this.getProducts = async page => {\n      API.get(`bom`, {\n        headers: {\n          'Authorization': 'Bearer ' + (await this.props.oktaAuth.authStateManager._authState.accessToken.accessToken)\n        }\n      }).then(response => {\n        let pageNum = new URLSearchParams(window.location.search).get('page');\n        let keyword = new URLSearchParams(window.location.search).get('keyword');\n\n        if (pageNum == null) {\n          pageNum = 1;\n        }\n\n        let pageData = new Object();\n\n        if (keyword != null) {\n          let filter = response.data.filter(item => item.title.toLowerCase().includes(keyword));\n          pageData = filter.slice(pageNum * 2 - 2, pageNum * 2);\n        } else {\n          pageData = response.data.slice(pageNum * 2 - 2, pageNum * 2);\n        }\n\n        console.log(this.props.oktaAuth.authStateManager._authState.accessToken.accessToken);\n        this.setState({\n          BOM: pageData,\n          page: pageNum,\n          totalPage: pageData.length / 2 + 1\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.deleteProduct = async () => {\n      console.log(this.code);\n      API.delete(`bom/${this.code}`, {\n        headers: {\n          'Authorization': 'Bearer ' + (await this.props.authState.accessToken.accessToken)\n        }\n      }).then(() => {\n        window.location.reload(false);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n  }\n\n  async componentDidMount() {\n    this.getProducts(1);\n    this.deleteModal = M.Modal.init(document.getElementById('deleteModal'));\n  }\n\n  render() {\n    console.log(this.state.BOM);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(BOMList, {\n        products: this.state.BOM,\n        showDialog: this.showDialog\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DeleteDialog, {\n        deleteObject: this.deleteProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withOktaAuth(BOM);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Component","withOktaAuth","API","DeleteDialog","M","Link","BOMForm","BOMList","BOM","state","code","page","totalPage","deleteModal","showDialog","open","getProducts","get","headers","props","oktaAuth","authStateManager","_authState","accessToken","then","response","pageNum","URLSearchParams","window","location","search","keyword","pageData","Object","filter","data","item","title","toLowerCase","includes","slice","console","log","setState","length","catch","error","deleteProduct","delete","authState","reload","componentDidMount","Modal","init","document","getElementById","render"],"sources":["C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/jobs-ui/src/components/BOM/BOM.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { withOktaAuth } from '@okta/okta-react'\r\nimport API from '../misc/api'\r\nimport DeleteDialog from '../staff/DeleteDialog'\r\nimport M from 'materialize-css'\r\nimport { Link } from 'react-router-dom'\r\nimport BOMForm from './BOMForm'\r\nimport BOMList from './BOMList'\r\n\r\n\r\nclass BOM extends Component {\r\n    state = {\r\n        BOM: [],\r\n        code: '',\r\n        page: 1,\r\n        totalPage: 1\r\n    }\r\n\r\n    deleteModal = null\r\n\r\n\r\n    showDialog = (code) => {\r\n        this.code = code\r\n        this.deleteModal.open()\r\n    }\r\n\r\n    async componentDidMount() {\r\n        \r\n        this.getProducts(1)\r\n        this.deleteModal = M.Modal.init(document.getElementById('deleteModal'))\r\n    }\r\n\r\n    \r\n    getProducts = async (page) => {\r\n        API.get(`bom`, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + await this.props.oktaAuth.authStateManager._authState.accessToken.accessToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                let pageNum = new URLSearchParams(window.location.search).get('page');\r\n                let keyword = new URLSearchParams(window.location.search).get('keyword');\r\n                if (pageNum == null) {\r\n                    pageNum = 1;\r\n                }\r\n                let pageData = new Object()\r\n                if (keyword != null) {\r\n                    let filter = response.data.filter(item =>\r\n                        item.title.toLowerCase().includes(keyword)\r\n                    )\r\n                    pageData = filter.slice((pageNum * 2) - 2, pageNum * 2)\r\n                } else {\r\n                    pageData = response.data.slice((pageNum * 2) - 2, pageNum * 2)\r\n                }\r\n                console.log(this.props.oktaAuth.authStateManager._authState.accessToken.accessToken)\r\n                this.setState({\r\n                    BOM: pageData,\r\n                    page: pageNum,\r\n                    totalPage: pageData.length / 2 + 1\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    deleteProduct = async () => {\r\n        console.log(this.code)\r\n        API.delete(`bom/${this.code}`, {\r\n          headers: {\r\n            'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n          }\r\n        })\r\n          .then(() => {\r\n            window.location.reload(false);\r\n          })    \r\n          .catch(error => {\r\n            console.log(error)\r\n          })\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.BOM)\r\n        return (\r\n            <div>\r\n                <BOMList products={this.state.BOM} showDialog={this.showDialog} />\r\n                <DeleteDialog deleteObject={this.deleteProduct }/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withOktaAuth(BOM)"],"mappings":"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"},"metadata":{},"sourceType":"module"}