{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{withOktaAuth}from'@okta/okta-react';import DeleteDialog from'../staff/DeleteDialog';import M from'materialize-css';import{Link}from'react-router-dom';import MPOList from'./InventoryList';import API from'../misc/api';import InventoryList from'./InventoryList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Inventory=/*#__PURE__*/function(_Component){_inherits(Inventory,_Component);var _super=_createSuper(Inventory);function Inventory(){var _this;_classCallCheck(this,Inventory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={inventory:[],code:'',page:1,totalPage:1};_this.deleteModal=null;_this.showDialog=function(code){_this.code=code;_this.deleteModal.open();};_this.getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(page){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=API;_context.next=3;return _this.props.oktaAuth.authStateManager._authState.accessToken.accessToken;case 3:_context.t1=_context.sent;_context.t2='Bearer '+_context.t1;_context.t3={'Authorization':_context.t2};_context.t4={headers:_context.t3};_context.t0.get.call(_context.t0,\"inventory\",_context.t4).then(function(response){var pageNum=new URLSearchParams(window.location.search).get('page');var keyword=new URLSearchParams(window.location.search).get('keyword');if(pageNum==null){pageNum=1;}var pageData=new Object();if(keyword!=null){var filter=response.data.filter(function(item){return item.code.toLowerCase().includes(keyword);});pageData=filter.slice(pageNum*2-2,pageNum*2);}else{pageData=response.data.slice(pageNum*2-2,pageNum*2);}console.log(_this.props.oktaAuth.authStateManager._authState.accessToken.accessToken);_this.setState({inventory:pageData,page:pageNum,totalPage:pageData.length/3+1});console.log(_this.state.inventory);}).catch(function(error){console.log(error);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteProduct=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=API;_context2.t1=\"inventory/\".concat(_this.code);_context2.next=4;return _this.props.authState.accessToken.accessToken;case 4:_context2.t2=_context2.sent;_context2.t3='Bearer '+_context2.t2;_context2.t4={'Authorization':_context2.t3};_context2.t5={headers:_context2.t4};_context2.t0.delete.call(_context2.t0,_context2.t1,_context2.t5).then(function(){window.location.reload(false);}).catch(function(error){console.log(error);});case 9:case\"end\":return _context2.stop();}}},_callee2);}));_this.searchKeyword=function(){window.location.replace(window.location.pathname+'?keyword='+document.getElementById('search').value+\"&page=1\");};return _this;}_createClass(Inventory,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.getProducts();this.deleteModal=M.Modal.init(document.getElementById('deleteModal'));case 2:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var currentPage=this.state.page;var previousPage=currentPage-1;var nextPage=currentPage%10+1;var minPage=currentPage>1?{\"display\":\"block\"}:{\"display\":\"none\"};var maxPage=currentPage<this.state.totalPage?{\"display\":\"block\"}:{\"display\":\"none\"};var keyword=new URLSearchParams(window.location.search).get('keyword');var url=keyword==null?window.location.pathname+'?page=':window.location.pathname+'?keyword='+keyword+'&page=';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(InventoryList,{mos:this.state.inventory,showDialog:this.showDialog}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white\",id:\"search\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w3-green w3-xlarge w3-padding w3-center w3-margin\",onClick:this.searchKeyword,children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"w3-bar w3-large w3-container\",children:[/*#__PURE__*/_jsx(\"a\",{href:url+previousPage,class:\"w3-button\",style:minPage,children:previousPage}),/*#__PURE__*/_jsx(\"a\",{href:url+currentPage,class:\"w3-button w3-green\",children:currentPage}),/*#__PURE__*/_jsx(\"a\",{href:url+nextPage,style:maxPage,class:\"w3-button   \",children:nextPage})]}),/*#__PURE__*/_jsx(DeleteDialog,{deleteObject:this.deleteProduct})]});}}]);return Inventory;}(Component);export default withOktaAuth(Inventory);","map":{"version":3,"names":["React","Component","withOktaAuth","DeleteDialog","M","Link","MPOList","API","InventoryList","Inventory","state","inventory","code","page","totalPage","deleteModal","showDialog","open","getProducts","props","oktaAuth","authStateManager","_authState","accessToken","headers","get","then","response","pageNum","URLSearchParams","window","location","search","keyword","pageData","Object","filter","data","item","toLowerCase","includes","slice","console","log","setState","length","catch","error","deleteProduct","authState","delete","reload","searchKeyword","replace","pathname","document","getElementById","value","Modal","init","currentPage","previousPage","nextPage","minPage","maxPage","url"],"sources":["C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/src/components/Inventory/Inventory.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { withOktaAuth } from '@okta/okta-react'\r\nimport DeleteDialog from '../staff/DeleteDialog'\r\nimport M from 'materialize-css'\r\nimport { Link } from 'react-router-dom'\r\nimport MPOList from './InventoryList'\r\nimport API from '../misc/api'\r\nimport InventoryList from './InventoryList'\r\n\r\n\r\nclass Inventory extends Component {\r\n    state = {\r\n        inventory: [],\r\n        code: '',\r\n        page: 1,\r\n        totalPage: 1\r\n    }\r\n\r\n    deleteModal = null\r\n\r\n\r\n    showDialog = (code) => {\r\n        this.code = code\r\n        this.deleteModal.open()\r\n    }\r\n\r\n    async componentDidMount() {\r\n    \r\n        this.getProducts()\r\n        this.deleteModal = M.Modal.init(document.getElementById('deleteModal'))\r\n    }\r\n    getProducts = async (page) => {\r\n        API.get(`inventory`, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + await this.props.oktaAuth.authStateManager._authState.accessToken.accessToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                let pageNum = new URLSearchParams(window.location.search).get('page');\r\n                let keyword = new URLSearchParams(window.location.search).get('keyword');\r\n                if (pageNum == null) {\r\n                    pageNum = 1;\r\n                }\r\n                let pageData = new Object()\r\n                if (keyword != null) {\r\n                    let filter = response.data.filter(item =>\r\n                        item.code.toLowerCase().includes(keyword)\r\n                    )\r\n                    pageData = filter.slice((pageNum * 2) - 2, pageNum * 2)\r\n                } else {\r\n                    pageData = response.data.slice((pageNum * 2) - 2, pageNum * 2)\r\n                }\r\n                console.log(this.props.oktaAuth.authStateManager._authState.accessToken.accessToken)\r\n                this.setState({\r\n                    inventory: pageData,\r\n                    page: pageNum,\r\n                    totalPage: (pageData.length / 3) + 1\r\n                })\r\n                console.log(this.state.inventory)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    deleteProduct = async () => {\r\n        API.delete(`inventory/${this.code}`, {\r\n          headers: {\r\n            'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n          }\r\n        })\r\n          .then(() => {\r\n            window.location.reload(false);\r\n          })    \r\n          .catch(error => {\r\n            console.log(error)\r\n          })\r\n    }\r\n\r\n    searchKeyword = () => {\r\n        window.location.replace(window.location.pathname + '?keyword=' + document.getElementById('search').value + \"&page=1\")\r\n    }\r\n    render() {\r\n        const currentPage = this.state.page\r\n        const previousPage = currentPage - 1\r\n        const nextPage = currentPage % 10 + 1;\r\n        const minPage = currentPage > 1 ? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const maxPage = currentPage< this.state.totalPage ? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const keyword = new URLSearchParams(window.location.search).get('keyword');\r\n        const url = keyword == null ? window.location.pathname + '?page=' : window.location.pathname + '?keyword=' + keyword + '&page='\r\n        return (\r\n            \r\n            <div>\r\n                <InventoryList mos={this.state.inventory} showDialog={this.showDialog}/>\r\n                <input class=\"w3-input w3-border w3-white\" id=\"search\" type=\"text\"  />\r\n                <button className='w3-green w3-xlarge w3-padding w3-center w3-margin' onClick={this.searchKeyword}>Search</button>\r\n                <div class=\"w3-bar w3-large w3-container\" >\r\n                    <a href={url + previousPage} class=\"w3-button\" style={minPage}>{previousPage}</a>\r\n                    <a href={url + currentPage} class=\"w3-button w3-green\">{currentPage}</a>\r\n                    <a href={url + nextPage} style={maxPage} class=\"w3-button   \">{nextPage}</a>\r\n                </div>\r\n                <DeleteDialog deleteObject={this.deleteProduct}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withOktaAuth(Inventory)"],"mappings":"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"},"metadata":{},"sourceType":"module"}