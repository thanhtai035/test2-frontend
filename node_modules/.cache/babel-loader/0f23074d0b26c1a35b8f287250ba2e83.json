{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,useState}from'react';import{withOktaAuth}from'@okta/okta-react';import API from'../misc/api';import{Link,useParams}from'react-router-dom';import Product from'./Product';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductForm=/*#__PURE__*/function(_Component){_inherits(ProductForm,_Component);var _super=_createSuper(ProductForm);function ProductForm(props){var _this;_classCallCheck(this,ProductForm);_this=_super.call(this,props);_this.addCategory=function(){var buf=_this.state.categories;buf.push('');_this.setState({categories:buf});};_this.removeCategory=function(index){var num=_this.state.categories.length;if(num>1){var buf=_toConsumableArray(_this.state.categories);buf.splice(index,1);_this.setState({categories:buf});}};_this.handleCategory=function(index,e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;var list=_toConsumableArray(_this.state.categories);list[index]=value;_this.setState({categories:list});};_this.handleChange=function(e){var _e$target2=e.target,id=_e$target2.id,value=_e$target2.value;_this.setState(_defineProperty({},id,value));};_this.saveProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var product,method,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();product=_this.state;method='POST';url='http://localhost:8080/api/products';console.log(product);_context.t0=API;_context.t1=method;_context.t2=url;_context.next=10;return _this.props.authState.accessToken.accessToken;case 10:_context.t3=_context.sent;_context.t4='Bearer '+_context.t3;_context.t5={'Content-Type':'application/json','Authorization':_context.t4};_context.t6=JSON.stringify(product);_context.t7={method:_context.t1,url:_context.t2,headers:_context.t5,data:_context.t6};_context.t0.request.call(_context.t0,_context.t7).then(function(){window.location.replace('/products');}).catch(function(error){console.log(error);});case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={code:'',name:'',description:'',categories:['']};return _this;}_createClass(ProductForm,[{key:\"render\",value:function render(){var _this2=this;var checkPath=this.props.match.path.localeCompare(\"/add-product\");var showCode=checkPath==0?{\"display\":\"block\"}:{\"display\":\"none\"};var msg=checkPath==0?\"Add new product\":\"Update Product\";var product=_objectSpread({},this.state);product.code=checkPath==1?new URLSearchParams(this.props.location.search).get('code'):'';return/*#__PURE__*/_jsxs(\"div\",{id:\"form\",children:[/*#__PURE__*/_jsxs(\"form\",{class:\"w3-container\",style:{margin:\"250px\"},onsubmit:\"return false\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"w3-margin w3-text-black w3-xxxlarge\",children:msg}),/*#__PURE__*/_jsxs(\"div\",{style:showCode,children:[/*#__PURE__*/_jsx(\"label\",{class:\"w3-text-black w3-xlarge\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Code \"})}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-text-black\",id:\"code\",onChange:this.handleChange,value:this.state.code,type:\"text\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{class:\"w3-text-black w3-xlarge\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Name \"})}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white\",id:\"name\",onChange:this.handleChange,value:this.state.name,type:\"text\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{class:\"w3-text-black w3-xlarge\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Description\"})}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white\",id:\"description\",onChange:this.handleChange,value:this.state.description,type:\"text\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w3-container\",children:/*#__PURE__*/_jsx(\"label\",{class:\"w3-text-black w3-xlarge\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Category\"})})}),/*#__PURE__*/_jsx(\"div\",{id:\"categoryList\"}),this.state.categories.map(function(category,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white w3-left\",value:category,required:true,type:\"text\",id:index,onChange:function onChange(evnt){return _this2.handleCategory(index,evnt);}}),/*#__PURE__*/_jsx(\"button\",{class:\"w3-button w3-red\",type:\"button\",onClick:function onClick(){return _this2.removeCategory({index:index});},children:\" X\"})]});}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{class:\"w3-button w3-green w3-large w3-margin\",type:\"button\",onClick:this.addCategory,children:[\" Add Category \",/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-plus\"})]})}),/*#__PURE__*/_jsx(Link,{exact:true,to:\"/products\",className:\"w3-button w3-red w3-padding w3-large\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{class:\"w3-btn w3-teal w3-large w3-bordered w3-margin\",onClick:this.saveProduct,children:\"Submit\"})]}),\"            \"]});}}]);return ProductForm;}(Component);export default withOktaAuth(ProductForm);","map":{"version":3,"names":["React","Component","useState","withOktaAuth","API","Link","useParams","Product","ProductForm","props","addCategory","buf","state","categories","push","setState","removeCategory","index","num","length","splice","handleCategory","e","target","name","value","list","handleChange","id","saveProduct","event","preventDefault","product","method","url","console","log","authState","accessToken","JSON","stringify","headers","data","request","then","window","location","replace","catch","error","code","description","checkPath","match","path","localeCompare","showCode","msg","URLSearchParams","search","get","margin","map","category","evnt"],"sources":["C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/src/components/product/ProductForm.jsx"],"sourcesContent":["import React, { Component, useState } from 'react'\r\nimport { withOktaAuth } from '@okta/okta-react'\r\nimport API from '../misc/api'\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport Product from './Product';\r\n\r\nclass ProductForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            code: '',\r\n            name: '',\r\n            description: '',\r\n            categories: ['']\r\n        }\r\n    }\r\n\r\n\r\n\r\n    addCategory = () => {\r\n        let buf = this.state.categories\r\n        buf.push('')\r\n        this.setState(\r\n            {\r\n                categories: buf\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    removeCategory = (index) => {\r\n        let num = this.state.categories.length\r\n        if (num > 1) {\r\n            let buf = [...this.state.categories];\r\n            buf.splice(index, 1)\r\n            this.setState(\r\n                {\r\n                    categories: buf\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    handleCategory = (index, e) => {\r\n        const { name, value } = e.target;\r\n\r\n        const list = [...this.state.categories];\r\n        list[index] = value;\r\n        this.setState(\r\n            {\r\n                categories: list\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { id, value } = e.target\r\n        this.setState({\r\n            [id]: value\r\n        })\r\n    }\r\n\r\n    saveProduct = async (event) => {\r\n        event.preventDefault()\r\n        const product = this.state\r\n\r\n        let method = 'POST'\r\n        let url = 'http://localhost:8080/api/products'\r\n\r\n        console.log(product)\r\n        API.request({\r\n            method: method,\r\n            url: url,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n            },\r\n            data: JSON.stringify(product)\r\n        })\r\n            .then(() => {\r\n                window.location.replace('/products');\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n\r\n    render() {\r\n        const checkPath = this.props.match.path.localeCompare(\"/add-product\")\r\n        const showCode = checkPath == 0 ? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const msg = checkPath == 0 ? \"Add new product\" : \"Update Product\"\r\n\r\n        let product = { ...this.state }\r\n        product.code = checkPath == 1 ? new URLSearchParams(this.props.location.search).get('code') : ''\r\n\r\n\r\n        return (\r\n            <div id=\"form\">\r\n                <form class=\"w3-container\" style={{ margin: \"250px\" }} onsubmit=\"return false\">\r\n                    <h1 className='w3-margin w3-text-black w3-xxxlarge'>{msg}</h1>\r\n                    <div style={showCode}>\r\n                        <label class=\"w3-text-black w3-xlarge\"><b>Code </b></label>\r\n                        <input class=\"w3-input w3-border w3-text-black\" id=\"code\" onChange={this.handleChange} value={this.state.code} type=\"text\" required />\r\n                    </div>\r\n                    <div>\r\n                        <label class=\"w3-text-black w3-xlarge\"><b>Name </b></label>\r\n                        <input class=\"w3-input w3-border w3-white\" id=\"name\" onChange={this.handleChange} value={this.state.name} type=\"text\" required />\r\n                    </div>\r\n                    <div>\r\n                        <label class=\"w3-text-black w3-xlarge\"><b>Description</b></label>\r\n                        <input class=\"w3-input w3-border w3-white\" id=\"description\" onChange={this.handleChange} value={this.state.description} type=\"text\" required />\r\n                    </div>\r\n                    <div className='w3-container'>\r\n                        <label class=\"w3-text-black w3-xlarge\"><b>Category</b></label>\r\n                    </div>\r\n                    <div id='categoryList'>\r\n\r\n                    </div>\r\n\r\n                    {\r\n                        this.state.categories.map((category, index) => (\r\n                            <div>\r\n                                <input class=\"w3-input w3-border w3-white w3-left\" value={category} required type='text' id={index} onChange={(evnt) => this.handleCategory(index, evnt)}></input>\r\n                                <button class=\"w3-button w3-red\" type=\"button\" onClick={() => this.removeCategory({ index })}> X</button>\r\n                            </div>\r\n                        ))}\r\n\r\n\r\n                    <div>\r\n                        <button class=\"w3-button w3-green w3-large w3-margin\" type=\"button\" onClick={this.addCategory}> Add Category <i class=\"fa fa-plus\"></i></button>\r\n                    </div>\r\n                    <Link exact to='/products' className='w3-button w3-red w3-padding w3-large'>Cancel</Link>\r\n                    <button class=\"w3-btn w3-teal w3-large w3-bordered w3-margin\" onClick={this.saveProduct}>Submit</button>\r\n\r\n                </form>            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withOktaAuth(ProductForm)"],"mappings":"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"},"metadata":{},"sourceType":"module"}