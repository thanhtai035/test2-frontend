{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { warn } from './util/console.js';\nimport { isPromise } from './util/types.js';\n\nclass PromiseQueue {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      quiet: false\n    };\n    this.queue = [];\n    this.running = false;\n    this.options = options;\n  }\n\n  push(method, thisObject) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return new Promise((resolve, reject) => {\n      if (this.queue.length > 0) {\n        if (this.options.quiet !== false) {\n          warn('Async method is being called but another async method is already running. ' + 'The new method will be delayed until the previous method completes.');\n        }\n      }\n\n      this.queue.push({\n        method,\n        thisObject,\n        args,\n        resolve,\n        reject\n      });\n      this.run();\n    });\n  }\n\n  run() {\n    if (this.running) {\n      return;\n    }\n\n    if (this.queue.length === 0) {\n      return;\n    }\n\n    this.running = true;\n    var queueItem = this.queue.shift();\n    var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n\n    if (isPromise(res)) {\n      res.then(queueItem.resolve, queueItem.reject).finally(() => {\n        this.running = false;\n        this.run();\n      });\n    } else {\n      queueItem.resolve(res);\n      this.running = false;\n      this.run();\n    }\n  }\n\n}\n\nexport { PromiseQueue as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;AA6BA,MAAMA,YAAN,CAAkB;EAKhBC,cAA2D;IAAA,IAA/CC,OAA+C,uEAAhB;MAAEC,KAAK,EAAE;IAAT,CAAgB;IACzD,KAAKC,KAAL,GAAa,EAAb;IACA,KAAKC,OAAL,GAAe,KAAf;IACA,KAAKH,OAAL,GAAeA,OAAf;EACD;;EAKDI,IAAI,CAACC,MAAD,EAAgCC,UAAhC,EAA+D;IAAA,kCAAXC,IAAW;MAAXA,IAAW;IAAA;;IACjE,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;MACrC,IAAI,KAAKR,KAAL,CAAWS,MAAX,GAAoB,CAAxB,EAA2B;QAGzB,IAAI,KAAKX,OAAL,CAAaC,KAAb,KAAuB,KAA3B,EAAkC;UAChCW,IAAI,CACF,+EACA,qEAFE,CAAJ;QAID;MACF;;MACD,KAAKV,KAAL,CAAWE,IAAX,CAAgB;QACdC,MADc;QAEdC,UAFc;QAGdC,IAHc;QAIdE,OAJc;QAKdC;MALc,CAAhB;MAOA,KAAKG,GAAL;IACD,CAnBM,CAAP;EAoBD;;EAEDA,GAAG;IACD,IAAI,KAAKV,OAAT,EAAkB;MAChB;IACD;;IACD,IAAI,KAAKD,KAAL,CAAWS,MAAX,KAAsB,CAA1B,EAA6B;MAC3B;IACD;;IACD,KAAKR,OAAL,GAAe,IAAf;IAEA,IAAIW,SAAS,GAAG,KAAKZ,KAAL,CAAWa,KAAX,EAAhB;IACA,IAAIC,GAAG,GAAGF,SAAS,CAACT,MAAV,CAAiBY,KAAjB,CAAuBH,SAAS,CAACR,UAAjC,EAA6CQ,SAAS,CAACP,IAAvD,CAAV;;IACA,IAAIW,SAAS,CAACF,GAAD,CAAb,EAAoB;MACjBA,GAAwB,CAACG,IAAzB,CAA8BL,SAAS,CAACL,OAAxC,EAAiDK,SAAS,CAACJ,MAA3D,EAAmEU,OAAnE,CAA2E,MAAK;QAC/E,KAAKjB,OAAL,GAAe,KAAf;QACA,KAAKU,GAAL;MACD,CAHA;IAIF,CALD,MAKO;MACLC,SAAS,CAACL,OAAV,CAAkBO,GAAlB;MACA,KAAKb,OAAL,GAAe,KAAf;MACA,KAAKU,GAAL;IACD;EACF;;AA1De","names":["PromiseQueue","constructor","options","quiet","queue","running","push","method","thisObject","args","Promise","resolve","reject","length","warn","run","queueItem","shift","res","apply","isPromise","then","finally"],"sources":["C:\\Users\\ADMIN\\Downloads\\okta-springboot-react-master\\okta-springboot-react-master\\test2\\test2-s3760615-front-end\\node_modules\\@okta\\lib\\PromiseQueue.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n// Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\n\nimport { isPromise, warn } from './util';\n\ninterface QueueItem {\n  method: () => void;\n  thisObject: object;\n  args: any[];\n  resolve: (value?: unknown) => void;\n  reject: (reason?: unknown) => void;\n}\n\ninterface PromiseQueueOptions {\n  quiet?: boolean; // if false, concurrrency warnings will not be logged\n}\nclass PromiseQueue {\n  queue: QueueItem[];\n  running: boolean;\n  options: PromiseQueueOptions;\n\n  constructor(options: PromiseQueueOptions = { quiet: false }) {\n    this.queue = [];\n    this.running = false;\n    this.options = options;\n  }\n\n  // Returns a promise\n  // If the method is synchronous, it will resolve when the method completes\n  // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n  push(method: (...args: any) => any, thisObject: any, ...args: any[]) {\n    return new Promise((resolve, reject) => {\n      if (this.queue.length > 0) {\n        // There is at least one other pending call.\n        // The PromiseQueue will prevent these methods from running concurrently.\n        if (this.options.quiet !== false) {\n          warn(\n            'Async method is being called but another async method is already running. ' +\n            'The new method will be delayed until the previous method completes.'\n          );\n        }\n      }\n      this.queue.push({\n        method,\n        thisObject,\n        args,\n        resolve,\n        reject\n      });\n      this.run();\n    });\n  }\n\n  run() {\n    if (this.running) {\n      return;\n    }\n    if (this.queue.length === 0) {\n      return;\n    }\n    this.running = true;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    var queueItem = this.queue.shift()!;\n    var res = queueItem.method.apply(queueItem.thisObject, queueItem.args as never) as unknown;\n    if (isPromise(res)) {\n      (res as Promise<unknown>).then(queueItem.resolve, queueItem.reject).finally(() => {\n        this.running = false;\n        this.run();\n      });\n    } else {\n      queueItem.resolve(res);\n      this.running = false;\n      this.run();\n    }\n  }\n}\n\nexport default PromiseQueue;"]},"metadata":{},"sourceType":"module"}