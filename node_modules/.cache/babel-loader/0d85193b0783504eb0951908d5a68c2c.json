{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{withOktaAuth}from'@okta/okta-react';import API from'../misc/api';import DeleteDialog from'../staff/DeleteDialog';import M from'materialize-css';import{Link}from'react-router-dom';import BOMForm from'./BOMForm';import BOMList from'./BOMList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BOM=/*#__PURE__*/function(_Component){_inherits(BOM,_Component);var _super=_createSuper(BOM);function BOM(){var _this;_classCallCheck(this,BOM);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={BOM:[],code:'',page:1,totalPage:1};_this.deleteModal=null;_this.showDialog=function(code){_this.code=code;_this.deleteModal.open();};_this.getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(page){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=API;_context.next=3;return _this.props.oktaAuth.authStateManager._authState.accessToken.accessToken;case 3:_context.t1=_context.sent;_context.t2='Bearer '+_context.t1;_context.t3={'Authorization':_context.t2};_context.t4={headers:_context.t3};_context.t0.get.call(_context.t0,\"bom\",_context.t4).then(function(response){var pageNum=new URLSearchParams(window.location.search).get('page');var keyword=new URLSearchParams(window.location.search).get('keyword');if(pageNum==null){pageNum=1;}var pageData=new Object();if(keyword!=null){var filter=response.data.filter(function(item){return item.title.toLowerCase().includes(keyword);});pageData=filter.slice(pageNum*2-2,pageNum*2);}else{pageData=response.data.slice(pageNum*2-2,pageNum*2);}console.log(_this.props.oktaAuth.authStateManager._authState.accessToken.accessToken);_this.setState({BOM:pageData,page:pageNum,totalPage:pageData.length/2+1});}).catch(function(error){console.log(error);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteProduct=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(_this.code);_context2.t0=API;_context2.t1=\"bom/\".concat(_this.code);_context2.next=5;return _this.props.authState.accessToken.accessToken;case 5:_context2.t2=_context2.sent;_context2.t3='Bearer '+_context2.t2;_context2.t4={'Authorization':_context2.t3};_context2.t5={headers:_context2.t4};_context2.t0.delete.call(_context2.t0,_context2.t1,_context2.t5).then(function(){window.location.reload(false);}).catch(function(error){console.log(error);});case 10:case\"end\":return _context2.stop();}}},_callee2);}));_this.searchKeyword=function(){window.location.replace(window.location.pathname+'?keyword='+document.getElementById('search').value+\"&page=1\");};return _this;}_createClass(BOM,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.getProducts(1);this.deleteModal=M.Modal.init(document.getElementById('deleteModal'));case 2:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var currentPage=this.state.page;var previousPage=currentPage-1;var nextPage=currentPage%10+1;var minPage=currentPage>1?{\"display\":\"block\"}:{\"display\":\"none\"};var maxPage=currentPage<this.state.totalPage+1?{\"display\":\"block\"}:{\"display\":\"none\"};var keyword=new URLSearchParams(window.location.search).get('keyword');var url=keyword==null?window.location.pathname+'?page=':window.location.pathname+'?keyword='+keyword+'&page=';console.log(nextPage);console.log(this.state.BOM);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BOMList,{products:this.state.BOM,showDialog:this.showDialog}),/*#__PURE__*/_jsx(\"input\",{class:\"w3-input w3-border w3-white\",id:\"search\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w3-green w3-xlarge w3-padding w3-center w3-margin\",onClick:this.searchKeyword,children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"w3-bar w3-large w3-container w3-center\",children:[/*#__PURE__*/_jsx(\"a\",{href:url+previousPage,class:\"w3-button\",style:minPage,children:previousPage}),/*#__PURE__*/_jsx(\"a\",{href:url+currentPage,class:\"w3-button w3-green\",children:currentPage}),/*#__PURE__*/_jsx(\"a\",{href:url+nextPage,style:maxPage,class:\"w3-button   \",children:nextPage})]}),/*#__PURE__*/_jsx(DeleteDialog,{deleteObject:this.deleteProduct})]});}}]);return BOM;}(Component);export default withOktaAuth(BOM);","map":{"version":3,"names":["React","Component","withOktaAuth","API","DeleteDialog","M","Link","BOMForm","BOMList","BOM","state","code","page","totalPage","deleteModal","showDialog","open","getProducts","props","oktaAuth","authStateManager","_authState","accessToken","headers","get","then","response","pageNum","URLSearchParams","window","location","search","keyword","pageData","Object","filter","data","item","title","toLowerCase","includes","slice","console","log","setState","length","catch","error","deleteProduct","authState","delete","reload","searchKeyword","replace","pathname","document","getElementById","value","Modal","init","currentPage","previousPage","nextPage","minPage","maxPage","url"],"sources":["C:/Users/ADMIN/Downloads/okta-springboot-react-master/okta-springboot-react-master/test2/test2-s3760615-front-end/src/components/BOM/BOM.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { withOktaAuth } from '@okta/okta-react'\r\nimport API from '../misc/api'\r\nimport DeleteDialog from '../staff/DeleteDialog'\r\nimport M from 'materialize-css'\r\nimport { Link } from 'react-router-dom'\r\nimport BOMForm from './BOMForm'\r\nimport BOMList from './BOMList'\r\n\r\n\r\nclass BOM extends Component {\r\n    state = {\r\n        BOM: [],\r\n        code: '',\r\n        page: 1,\r\n        totalPage: 1\r\n    }\r\n\r\n    deleteModal = null\r\n\r\n\r\n    showDialog = (code) => {\r\n        this.code = code\r\n        this.deleteModal.open()\r\n    }\r\n\r\n    async componentDidMount() {\r\n        \r\n        this.getProducts(1)\r\n        this.deleteModal = M.Modal.init(document.getElementById('deleteModal'))\r\n    }\r\n\r\n    \r\n    getProducts = async (page) => {\r\n        API.get(`bom`, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + await this.props.oktaAuth.authStateManager._authState.accessToken.accessToken\r\n            }\r\n        })\r\n            .then(response => {\r\n                let pageNum = new URLSearchParams(window.location.search).get('page');\r\n                let keyword = new URLSearchParams(window.location.search).get('keyword');\r\n                if (pageNum == null) {\r\n                    pageNum = 1;\r\n                }\r\n                let pageData = new Object()\r\n                if (keyword != null) {\r\n                    let filter = response.data.filter(item =>\r\n                        item.title.toLowerCase().includes(keyword)\r\n                    )\r\n                    pageData = filter.slice((pageNum * 2) - 2, pageNum * 2)\r\n                } else {\r\n                    pageData = response.data.slice((pageNum * 2) - 2, pageNum * 2)\r\n                }\r\n                console.log(this.props.oktaAuth.authStateManager._authState.accessToken.accessToken)\r\n                this.setState({\r\n                    BOM: pageData,\r\n                    page: pageNum,\r\n                    totalPage: pageData.length / 2 + 1\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    deleteProduct = async () => {\r\n        console.log(this.code)\r\n        API.delete(`bom/${this.code}`, {\r\n          headers: {\r\n            'Authorization': 'Bearer ' + await this.props.authState.accessToken.accessToken\r\n          }\r\n        })\r\n          .then(() => {\r\n            window.location.reload(false);\r\n          })    \r\n          .catch(error => {\r\n            console.log(error)\r\n          })\r\n    }\r\n    searchKeyword = () => {\r\n        window.location.replace(window.location.pathname + '?keyword=' + document.getElementById('search').value + \"&page=1\")\r\n    }\r\n\r\n    render() {\r\n        const currentPage = this.state.page\r\n        const previousPage = currentPage - 1\r\n        const nextPage = currentPage % 10 + 1;\r\n        const minPage = currentPage > 1 ? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const maxPage = currentPage< this.state.totalPage + 1? { \"display\": \"block\" } : { \"display\": \"none\" }\r\n        const keyword = new URLSearchParams(window.location.search).get('keyword');\r\n        const url = keyword == null ? window.location.pathname + '?page=' : window.location.pathname + '?keyword=' + keyword + '&page='\r\n        console.log(nextPage)\r\n        console.log(this.state.BOM)\r\n        return (\r\n            <div>\r\n                <BOMList products={this.state.BOM} showDialog={this.showDialog} />\r\n                <input class=\"w3-input w3-border w3-white\" id=\"search\" type=\"text\"  />\r\n                <button className='w3-green w3-xlarge w3-padding w3-center w3-margin' onClick={this.searchKeyword}>Search</button>\r\n                <div class=\"w3-bar w3-large w3-container w3-center\">\r\n                    <a href={url + previousPage} class=\"w3-button\" style={minPage}>{previousPage}</a>\r\n                    <a href={url + currentPage} class=\"w3-button w3-green\">{currentPage}</a>\r\n                    <a href={url + nextPage} style={maxPage} class=\"w3-button   \">{nextPage}</a>\r\n                </div>\r\n                <DeleteDialog deleteObject={this.deleteProduct }/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withOktaAuth(BOM)"],"mappings":"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"},"metadata":{},"sourceType":"module"}